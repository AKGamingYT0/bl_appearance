var n=0,f=e=>{n=e};var q=(e,t)=>{SendNUIMessage({action:e,data:t})},G=e=>new Promise(t=>setTimeout(t,e)),Se=async e=>{let t=typeof e=="number"?e:GetHashKey(e);return!IsModelValid(t)&&!IsModelInCdimage(t)?(console.warn(`attempted to load invalid model '${e}'`),0):(HasModelLoaded(t)||(RequestModel(t),await new Promise(o=>{let a=setInterval(()=>{HasModelLoaded(t)&&(clearInterval(a),o())},100)})),t)},Z=GetCurrentResourceName(),_e={},re={};function Ze(e,t){if(t&&t>0){let r=GetGameTimer();if((_e[e]||0)>r)return!1;_e[e]=r+t}return!0}onNet(`_bl_cb_${Z}`,(e,...t)=>{let r=re[e];return r&&r(...t)});function m(e,...t){if(!Ze(e,0))return;let r;do r=`${e}:${Math.floor(Math.random()*100001)}`;while(re[r]);return emitNet(`_bl_cb_${e}`,Z,r,...t),new Promise(o=>{re[r]=o})}function oe(e,t){onNet(`_bl_cb_${e}`,async(r,o,...a)=>{let i;try{i=await t(...a)}catch(s){console.error(`an error occurred while handling callback event ${e}`),console.log(`^3${s.stack}^0`)}emitNet(`_bl_cb_${r}`,o,i)})}var ke=e=>new Promise(t=>{let r=()=>{if(RequestResourceFileSet(e)){let o=exports.bl_appearance.config().locale,a=LoadResourceFile(Z,`locale/${o}.json`);a||(console.error(`${o}.json not found in locale, please verify!, we used english for now!`),a=LoadResourceFile(Z,"locale/en.json")),t(a)}else setTimeout(r,100)};r()});var H=exports.bl_bridge,V=()=>H.core().getPlayerData(),b=()=>V().cid,ve=()=>V().gender==="male"?"mp_m_freemode_01":"mp_f_freemode_01";function Ae(e){return new Promise(t=>setTimeout(t,e))}function Oe(e){return e.includes("'")?e.replace(/'/g,""):e}function De(){let e=V().job;return e?{name:e.name,isBoss:e.isBoss}:null}function ae(e){let t=GetEntityModel(e);return t===GetHashKey("mp_m_freemode_01")||t===GetHashKey("mp_f_freemode_01")}var ce=2,ie=1,R=!1,g=1.8,h=null,_=0,N=0,w=null,ne=null,le=!1;var L="head",Ue={whole:0,head:31086,torso:24818,legs:[16335,46078],shoes:[14201,52301]},F=e=>Math.cos(e*Math.PI/180),se=e=>Math.sin(e*Math.PI/180),Ge=()=>{let e=(F(N)*F(_)+F(_)*F(N))/2*g,t=(se(N)*F(_)+F(_)*se(N))/2*g,r=se(_)*g;return[e,t,r]},ue=(e,t)=>{if(!R||!w||le)return;e=e??0,t=t??0,N-=e,_+=t;let o=L==="whole"||L==="head"?89:70;_=Math.min(Math.max(_,L==="shoes"?5:-20),o);let[s,u,c]=Ge();SetCamCoord(h,w.x+s,w.y+u,w.z+c),PointCamAtCoord(h,w.x,w.y,w.z)},Me=async(e,t)=>{let r=GetEntityHeading(n)+94;t=t??1,le=!0,g=t,N=r;let[o,a,i]=Ge(),s=CreateCamWithParams("DEFAULT_SCRIPTED_CAMERA",e.x+o,e.y+a,e.z+i,0,0,0,70,!1,0);w=e,le=!1,ne=h,h=s,PointCamAtCoord(s,e.x,e.y,e.z),SetCamActiveWithInterp(s,ne,250,0,0),await G(250),SetCamUseShallowDofMode(s,!0),SetCamNearDof(s,.4),SetCamFarDof(s,1.2),SetCamDofStrength(s,.3),Fe(s),DestroyCam(ne,!0)},Fe=e=>{DoesCamExist(h)&&e==h&&(SetUseHiDof(),setTimeout(Fe,0))},Ie=()=>{if(R)return;R=!0,g=ce,h=CreateCam("DEFAULT_SCRIPTED_CAMERA",!0);let[e,t,r]=GetPedBoneCoords(n,31086,0,0,0);SetCamCoord(h,e,t,r),RenderScriptCams(!0,!0,1e3,!0,!0),I("whole",g)},Ne=()=>{R&&(R=!1,RenderScriptCams(!1,!0,250,!0,!1),DestroyCam(h,!0),h=null,w=null)},I=(e,t=g)=>{let r=Ue[e],o=Array.isArray(r);if(L=e,!o&&r===0){let[u,c,l]=GetEntityCoords(n,!1);Me({x:u,y:c,z:l+0},t);return}if(t>ie&&(t=ie),o){let[u,c,l]=GetPedBoneCoords(n,r[0],0,0,0),[d,y,E]=GetPedBoneCoords(n,r[1],0,0,0);var a=(u+d)/2,i=(c+y)/2,s=(l+E)/2}else var[a,i,s]=GetPedBoneCoords(n,r,0,0,0);Me({x:a,y:i,z:s+0},t)};RegisterNuiCallback("appearance:camMove",(e,t)=>{ue(e.x,e.y),t(1)});RegisterNuiCallback("appearance:camSection",(e,t)=>{switch(e){case"whole":I("whole",ce);break;case"head":I("head");break;case"torso":I("torso");break;case"legs":I("legs");break;case"shoes":I("shoes"),ue();break}t(1)});RegisterNuiCallback("appearance:camZoom",(e,t)=>{if(e==="down"){let r=L==="whole"?ce:ie,o=g+.05;g=o>=r?r:o}else if(e==="up"){let r=g-.05;g=r<=.3?.3:r}g=g,ue(),t(1)});var pe=["Blemishes","FacialHair","Eyebrows","Ageing","Makeup","Blush","Complexion","SunDamage","Lipstick","MolesFreckles","ChestHair","BodyBlemishes","AddBodyBlemishes","EyeColor"];var de=["Nose_Width","Nose_Peak_Height","Nose_Peak_Lenght","Nose_Bone_Height","Nose_Peak_Lowering","Nose_Bone_Twist","EyeBrown_Height","EyeBrown_Forward","Cheeks_Bone_High","Cheeks_Bone_Width","Cheeks_Width","Eyes_Openning","Lips_Thickness","Jaw_Bone_Width","Jaw_Bone_Back_Lenght","Chin_Bone_Lowering","Chin_Bone_Length","Chin_Bone_Width","Chin_Hole","Neck_Thikness"];var me=["face","masks","hair","torsos","legs","bags","shoes","neck","shirts","vest","decals","jackets"];var fe=["hats","glasses","earrings","mouth","lhand","rhand","watches","bracelets"];function We(e){return exports.bl_appearance.models().findIndex(o=>GetHashKey(o)===e)}function be(e){return{color:GetPedHairColor(e),highlight:GetPedHairHighlightColor(e)}}exports("GetHair",be);function ge(e){let t=new ArrayBuffer(80);global.Citizen.invokeNative("0x2746bd9d88c5c5d0",e,new Uint32Array(t));let{0:r,2:o,4:a,6:i,8:s,18:u,10:c}=new Uint32Array(t),{0:l,2:d,4:y}=new Float32Array(t,48);return{shapeFirst:r,shapeSecond:o,shapeThird:a,skinFirst:i,skinSecond:s,skinThird:c,shapeMix:l,thirdMix:y,skinMix:d,hasParent:!!u}}exports("GetHeadBlend",ge);function ye(e){let t={},r={};for(let o=0;o<pe.length;o++){let a=pe[o];if(t[a]=GetNumHeadOverlayValues(o),a==="EyeColor")r[a]={id:a,index:o,overlayValue:GetPedEyeColor(e)};else{let[i,s,u,c,l,d]=GetPedHeadOverlayData(e,o);r[a]={id:a,index:o,overlayValue:s===255?-1:s,colourType:u,firstColor:c,secondColor:l,overlayOpacity:d}}}return[r,t]}exports("GetHeadOverlay",ye);function he(e){let t=GetEntityModel(e);if(t!==GetHashKey("mp_m_freemode_01")&&t!==GetHashKey("mp_f_freemode_01"))return;let r={};for(let o=0;o<de.length;o++){let a=de[o];r[a]={id:a,index:o,value:GetPedFaceFeature(e,o)}}return r}exports("GetHeadStructure",he);function j(e){let t={},r={};for(let o=0;o<me.length;o++){let a=me[o],i=GetPedDrawableVariation(e,o);r[a]={id:a,index:o,total:GetNumberOfPedDrawableVariations(e,o),textures:GetNumberOfPedTextureVariations(e,o,i)},t[a]={id:a,index:o,value:GetPedDrawableVariation(e,o),texture:GetPedTextureVariation(e,o)}}return[t,r]}exports("GetDrawables",j);function z(e){let t={},r={};for(let o=0;o<fe.length;o++){let a=fe[o],i=GetPedPropIndex(e,o);r[a]={id:a,index:o,total:GetNumberOfPedPropDrawableVariations(e,o),textures:GetNumberOfPedPropTextureVariations(e,o,i)},t[a]={id:a,index:o,value:GetPedPropIndex(e,o),texture:GetPedPropTextureIndex(e,o)}}return[t,r]}exports("GetProps",z);async function T(e){let[t,r]=ye(e),[o,a]=j(e),[i,s]=z(e),u=GetEntityModel(e);return{modelIndex:We(u),model:u,hairColor:be(e),headBlend:ge(e),headOverlay:t,headOverlayTotal:r,headStructure:he(e),drawables:o,props:i,drawTotal:a,propTotal:s,tattoos:[]}}exports("GetAppearance",T);oe("bl_appearance:client:getAppearance",()=>(f(PlayerPedId()),T(n)));function $e(e){let[t]=j(e),[r]=z(e),[o]=ye(e);return{headOverlay:o,drawables:t,props:r}}exports("GetPedClothes",$e);function Ye(e){return{headBlend:ge(e),headStructure:he(e),hairColor:be(e),model:GetEntityModel(e)}}exports("GetPedSkin",Ye);function U(){let e=[],[t,r]=exports.bl_appearance.tattoos();for(let a=0;a<r.length;a++){let i=r[a],s=i.zone,u=i.label,c=i.index;e[c]={zone:s,label:u,zoneIndex:c,dlcs:[]};for(let l=0;l<t.length;l++){let d=t[l];e[c].dlcs.push({label:d.dlc,dlcIndex:l,tattoos:[]})}}let o=GetEntityModel(n)===GetHashKey("mp_f_freemode_01");for(let a=0;a<t.length;a++){let i=t[a],{dlc:s,tattoos:u}=i,c=GetHashKey(s);for(let l=0;l<u.length;l++){let d=u[l],y=null,te=d.toLowerCase().includes("_f");(te&&o||!te&&!o)&&(y=d);let M=null,A=-1;y&&(M=GetHashKey(y),A=GetPedDecorationZoneFromHashes(c,M)),A!==-1&&M&&e[A].dlcs[a].tattoos.push({label:y,hash:M,zone:A,dlc:s})}}return e}exports("GetTattoos",async()=>await m("bl_appearance:server:getTattoos"));oe("bl_appearance:client:migration:setAppearance",e=>{e.type==="fivem"&&exports["fivem-appearance"].setPlayerAppearance(e.data),e.type==="illenium"&&exports["illenium-appearance"].setPlayerAppearance(e.data)});var W={hats:{type:"prop",index:0},glasses:{type:"prop",index:1},masks:{type:"drawable",index:1,off:0},shirts:{type:"drawable",index:8,off:15,hook:{drawables:[{component:3,variant:15,texture:0,id:"torsos"},{component:8,variant:15,texture:0,id:"shirts"}]}},jackets:{type:"drawable",index:11,off:15,hook:{drawables:[{component:3,variant:15,texture:0,id:"torsos"},{component:11,variant:15,texture:0,id:"jackets"}]}},vest:{type:"drawable",index:9,off:0},legs:{type:"drawable",index:4,off:18},shoes:{type:"drawable",index:6,off:34}};function C(e,t){return SetPedComponentVariation(e,t.index,t.value,t.texture,0),GetNumberOfPedTextureVariations(e,t.index,t.value)}exports("SetDrawable",C);function S(e,t){if(t.value===-1){ClearPedProp(e,t.index);return}return SetPedPropIndex(e,t.index,t.value,t.texture,!1),GetNumberOfPedPropTextureVariations(e,t.index,t.value)}exports("SetProp",S);var Je=GetHashKey("mp_m_freemode_01"),k=async(e,t)=>{if(t==null||t===void 0)return e;let r;return typeof t=="string"?r=GetHashKey(t):typeof t=="number"?r=t:r=t.model||Je,r===0||(await Se(r),IsPedAPlayer(e)?(SetPlayerModel(PlayerId(),r),e=PlayerPedId(),f(e)):SetPlayerModel(e,r),SetModelAsNoLongerNeeded(r),SetPedDefaultComponentVariation(e),!ae(e))||(!(typeof t=="string"||typeof t=="number")&&Object.keys(t.headBlend).length>0?(K(e,t.headBlend),SetPedHeadBlendData(e,0,0,0,0,0,0,0,0,0,!1)):r===GetHashKey("mp_m_freemode_01")?SetPedHeadBlendData(e,0,0,0,0,0,0,0,0,0,!1):r===GetHashKey("mp_f_freemode_01")&&SetPedHeadBlendData(e,45,21,0,20,15,0,.3,.1,0,!1)),e};exports("SetModel",k);function $(e,t){SetPedFaceFeature(e,t.index,t.value+0)}exports("SetFaceFeature",$);var B=e=>e>=0?e:0;function K(e,t){if(e=e||n,!ae(e))return;let r=B(t.shapeFirst),o=B(t.shapeSecond),a=B(t.shapeThird),i=B(t.skinFirst),s=B(t.skinSecond),u=B(t.skinThird),c=t.shapeMix+0,l=t.skinMix+0,d=t.thirdMix+0,y=t.hasParent;SetPedHeadBlendData(e,r,o,a,i,s,u,c,l,d,y)}exports("SetHeadBlend",K);function Y(e,t){let r=t.index;if(r===13){SetPedEyeColor(e,t.value);return}let o=t.overlayValue;if(t.id==="hairColor"){SetPedHairTint(e,t.hairColor,t.hairHighlight);return}SetPedHeadOverlay(e,r,o,t.overlayOpacity+0),SetPedHeadOverlayColor(e,r,1,t.firstColor,t.secondColor)}exports("SetHeadOverlay",Y);function Be(e){let t=e.drawables,r=e.props;for(let[o,a]of Object.entries(W)){let i=a.type,s=a.index;i==="drawable"&&t[o]?GetPedDrawableVariation(n,s)!==t[o].value&&SetPedComponentVariation(n,s,t[o].value,0,0):i==="prop"&&r[o]&&GetPedPropIndex(n,s)!==r[o].value&&SetPedPropIndex(n,s,r[o].value,0,!1)}}exports("SetPedClothes",v);function v(e,t){let r=t.drawables,o=t.props,a=t.headOverlay;for(let i in r){let s=r[i];C(e,s)}for(let i in o){let s=o[i];S(e,s)}for(let i in a){let s=a[i];Y(e,s)}}exports("SetPedClothes",v);var J=async(e,t)=>{if(!t)return;e=await k(e,t);let r=t.headStructure,o=t.headBlend;if(o&&K(e,o),r)for(let a in r){let i=r[a];$(e,i)}};exports("SetPedSkin",J);function x(e,t){if(t){ClearPedDecorationsLeaveScars(e);for(let r=0;r<t.length;r++){let o=t[r].tattoo;if(o){let a=GetHashKey(o.dlc),i=o.hash;AddPedDecorationFromHashes(e,a,i)}}}}exports("SetPedTattoos",x);function X(e,t){if(!t)return;let r=t.color,o=t.highlight;SetPedHairColor(e,r,o)}exports("SetPedHairColors",X);async function O(e,t){if(IsPedAPlayer(e)){P(t);return}await J(e,t),v(e,t),X(e,t.hairColor),x(e,t.tattoos)}exports("SetPedAppearance",O);async function P(e){f(PlayerPedId()),await J(n,e),f(PlayerPedId()),v(n,e),X(n,e.hairColor),x(n,e.tattoos)}exports("SetPedClothes",v);exports("SetPedSkin",J);exports("SetPedTattoos",x);exports("SetPedHairColors",X);RegisterNuiCallback("appearance:cancel",async(e,t)=>{await P(e),xe(),t(1)});RegisterNuiCallback("appearance:save",async(e,t)=>{Be(e),await G(100);let r=await T(n);r.tattoos=e.tattoos,m("bl_appearance:server:saveAppearance",b(),r),x(n,r.tattoos),xe(),t(1)});RegisterNuiCallback("appearance:setModel",async(e,t)=>{let r=GetHashKey(e);if(!IsModelInCdimage(r)||!IsModelValid(r))return t(0);let o=await k(n,r);f(o);let a=await T(n);a.tattoos=[],x(n,[]),t(a)});RegisterNuiCallback("appearance:getModelTattoos",async(e,t)=>{let r=U();t(r)});RegisterNuiCallback("appearance:setHeadStructure",async(e,t)=>{$(n,e),t(1)});RegisterNuiCallback("appearance:setHeadOverlay",async(e,t)=>{Y(n,e),t(1)});RegisterNuiCallback("appearance:setHeadBlend",async(e,t)=>{K(n,e),t(1)});RegisterNuiCallback("appearance:setTattoos",async(e,t)=>{x(n,e),t(1)});RegisterNuiCallback("appearance:setProp",async(e,t)=>{let r=S(n,e);t(r)});RegisterNuiCallback("appearance:setDrawable",async(e,t)=>{let r=C(n,e);t(r)});RegisterNuiCallback("appearance:toggleItem",async(e,t)=>{let r=W[e.item];if(!r)return t(!1);let o=e.data,a=r.type,i=r.index,s=r.hook,u=e.hookData;if(!o)return t(!1);if(a==="prop")if(GetPedPropIndex(n,i)===-1){S(n,o),t(!1);return}else{ClearPedProp(n,i),t(!0);return}else if(a==="drawable"){let c=GetPedDrawableVariation(n,i);if(o.value===r.off){t(!1);return}if(o.value===c){if(SetPedComponentVariation(n,i,r.off,0,0),s)for(let l=0;l<s.drawables?.length;l++){let d=s.drawables[l];SetPedComponentVariation(n,d.component,d.variant,d.texture,0)}t(!0);return}else{C(n,o);for(let l=0;l<u?.length;l++)C(n,u[l]);t(!1);return}}});RegisterNuiCallback("appearance:saveOutfit",async(e,t)=>{let r=await m("bl_appearance:server:saveOutfit",e);t(r)});RegisterNuiCallback("appearance:deleteOutfit",async({id:e},t)=>{let r=await m("bl_appearance:server:deleteOutfit",e);t(r)});RegisterNuiCallback("appearance:renameOutfit",async(e,t)=>{let r=await m("bl_appearance:server:renameOutfit",e);t(r)});RegisterNuiCallback("appearance:useOutfit",async(e,t)=>{v(n,e),t(1)});RegisterNuiCallback("appearance:importOutfit",async({id:e,outfitName:t},r)=>{let o=b(),a=await m("bl_appearance:server:importOutfit",o,e,t);r(a)});RegisterNuiCallback("appearance:fetchOutfit",async({id:e},t)=>{let r=await m("bl_appearance:server:fetchOutfit",e);t(r)});RegisterNuiCallback("appearance:itemOutfit",async(e,t)=>{let r=await m("bl_appearance:server:itemOutfit",e);t(r)});onNet("bl_appearance:server:useOutfiItem",e=>{v(n,e)});var Pe=exports.bl_appearance,Ee=0,we=!1,ee=null,Q=null;async function D(e,t=!1){if(e===null||we)return;let r=PlayerPedId(),o=Pe.menus(),a=typeof e=="string",i=a?e:e.type,s=o[i];if(!s)return;f(r);let u=b(),c=s.tabs,l=t?!1:s.allowExit;Ee=GetPedArmour(r);let d=[];c.includes("outfits")&&(d=await m("bl_appearance:server:getOutfits",u));let E=[];c.includes("heritage")&&(E=Pe.models());let M=c.includes("tattoos"),A;M&&(A=U());let Ce=a?{}:Xe(e);if(t){let ze=GetHashKey(ve());r=await k(r,ze),emitNet("bl_appearance:server:setroutingbucket"),Q=new Promise(Ke=>{ee=Ke}),f(r)}let je=await T(r);return Ie(),q("appearance:data",{tabs:c,appearance:je,blacklist:Ce,tattoos:A,outfits:d,models:E,allowExit:l,job:De(),locale:await ke("locale")}),SetNuiFocus(!0,!0),q("appearance:visible",!0),we=!0,exports.bl_appearance.hideHud(!0),Q&&(await Q,emitNet("bl_appearance:server:resetroutingbucket")),Q=null,ee=null,!0}exports("OpenMenu",D);RegisterCommand("appearance",async(e,t)=>{let r=t[0];if(!r)exports.bl_appearance.InitialCreation();else{let o=r.toLowerCase();D(o)}},!0);function Xe(e){if(!e)return{};let{groupTypes:t,base:r}=Pe.blacklist();if(!t)return{};if(!r)return{};let o={...r},a=V();for(let i in t){let s=t[i];for(let u in s){let c=!1;if(i=="jobs"&&e.jobs&&(c=e.jobs.includes(a.job.name)),i=="gangs"&&e.gangs&&(c=e.gangs.includes(a.gang.name)),!c){let l=s[u];o=Object.assign({},o,l,{drawables:Object.assign({},o.drawables,l.drawables)})}}}return o}function xe(){SetPedArmour(n,Ee),Ne(),SetNuiFocus(!1,!1),q("appearance:visible",!1),exports.bl_appearance.hideHud(!1),ee&&ee(),we=!1}function He(){onNet("qb-clothing:client:loadPlayerClothing",async(e,t)=>{await O(t,e)}),onNet("qb-clothes:client:CreateFirstCharacter",()=>{exports.bl_appearance.InitialCreation()}),onNet("qb-clothing:client:openOutfitMenu",()=>{D({type:"outfits",coords:[0,0,0,0]})})}function Ve(){let e=!1;on("esx_skin:resetFirstSpawn",()=>{e=!0}),on("esx_skin:playerRegistered",()=>{e&&exports.bl_appearance.InitialCreation()}),onNet("skinchanger:loadSkin2",async(t,r)=>{t.model||(t.model=GetHashKey("mp_m_freemode_01")),await O(r,t)}),onNet("skinchanger:getSkin",async t=>{let r=await b(),o=await m("bl_appearance:server:getAppearance",r);t(o)}),onNet("skinchanger:loadSkin",async(t,r)=>{await P(t),r&&r()}),onNet("esx_skin:openSaveableMenu",async t=>{exports.bl_appearance.InitialCreation(t)})}function p(e,t){on("__cfx_export_illenium-appearance_"+e,r=>{r(t)})}function Le(){p("startPlayerCustomization",()=>{exports.bl_appearance.InitialCreation()}),p("getPedModel",e=>GetEntityModel(e)),p("getPedComponents",e=>{let t=j(e)[0],r=[];for(let o of t){let a=t[o];r.push({component_id:a.index,drawable:a.value,texture:a.texture})}}),p("getPedProps",e=>{let t=z(e)[0],r=[];for(let o of t){let a=t[o];r.push({prop_id:a.index,drawable:a.value,texture:a.texture})}}),p("getPedHeadBlend",e=>console.warn("You Still cannot use this function")),p("getPedFaceFeatures",e=>console.warn("You Still cannot use this function")),p("getPedHeadOverlays",e=>console.warn("You Still cannot use this function")),p("getPedHair",e=>console.warn("You Still cannot use this function")),p("getPedAppearance",e=>T(e)),p("setPlayerModel",e=>{f(PlayerPedId()),k(n,e)}),p("setPedHeadBlend",(e,t)=>console.warn("You Still cannot use this function")),p("setPedFaceFeatures",()=>console.warn("You Still cannot use this function")),p("setPedHeadOverlays",(e,t)=>console.warn("You Still cannot use this function")),p("setPedHair",async(e,t,r)=>console.warn("You Still cannot use this function")),p("setPedEyeColor",()=>console.warn("You Still cannot use this function")),p("setPedComponent",(e,t)=>{let r={index:t.component_id,value:t.drawable,texture:t.texture};C(e,r)}),p("setPedComponents",(e,t)=>{for(let r of t){let o={index:r.component_id,value:r.drawable,texture:r.texture};C(e,o)}}),p("setPedProp",(e,t)=>{let r={index:t.prop_id,value:t.drawable,texture:t.texture};S(e,r)}),p("setPedProps",(e,t)=>{for(let r of t){let o={index:r.prop_id,value:r.drawable,texture:r.texture};S(e,o)}}),p("setPedAppearance",(e,t)=>{O(e,t)}),p("setPedTattoos",(e,t)=>{x(e,t)})}exports("SetPlayerPedAppearance",async e=>{let t;if(!e||typeof e=="string"){let r=e||await b();t=await m("bl_appearance:server:getAppearance",r)}else typeof e=="object"&&(t=e);if(!t)throw new Error("No valid appearance found");await P(t)});exports("GetPlayerPedAppearance",async e=>(e=e||await b(),await m("bl_appearance:server:getAppearance",e)));exports("InitialCreation",async e=>{await D({type:"appearance",coords:[0,0,0,0]},!0),e&&e()});on("bl_sprites:client:useZone",e=>{D(e)});onNet("bl_bridge:client:playerLoaded",async()=>{for(;!H.core().playerLoaded();)await Ae(100);let e=await b(),t=await m("bl_appearance:server:getAppearance",e);t&&await P(t)});onNet("onResourceStart",async e=>{if(e===GetCurrentResourceName()&&H.core().playerLoaded()){let t=await b(),r=await m("bl_appearance:server:getAppearance",t);if(!r)return;await P(r)}});var Re=H.getFramework("core"),Te=Oe(GetConvar("bl:framework","qb"));Te=="qb"||Te=="qbx"&&GetResourceState(Re)=="started"?He():Te=="esx"&&GetResourceState(Re)=="started"&&Ve();Le();RegisterCommand("reloadskin",async()=>{let e=await b(),t=GetEntityHealth(n),r=GetEntityMaxHealth(n),o=GetPedArmour(n),a=await m("bl_appearance:server:getAppearance",e);a&&(await P(a),SetPedMaxHealth(n,r),G(1e3),SetEntityHealth(n,t),SetPedArmour(n,o))},!1);
