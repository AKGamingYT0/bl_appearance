var i=0,j=e=>{i=e};var K=(e,t)=>{SendNUIMessage({action:e,data:t})},A=e=>new Promise(t=>setTimeout(t,e)),_e=async e=>{let t=typeof e=="number"?e:GetHashKey(e);if(!IsModelValid(t))throw exports.bl_bridge.notify()({title:"Invalid model!",type:"error",duration:1e3}),new Error(`attempted to load invalid model '${e}'`);return HasModelLoaded(t)||(RequestModel(t),await new Promise(o=>{let a=setInterval(()=>{HasModelLoaded(t)&&(clearInterval(a),o())},100)})),t},W=GetCurrentResourceName(),Te={},oe={};function We(e,t){if(t&&t>0){let r=GetGameTimer();if((Te[e]||0)>r)return!1;Te[e]=r+t}return!0}onNet(`_bl_cb_${W}`,(e,...t)=>{let r=oe[e];return r&&r(...t)});function m(e,...t){if(!We(e,0))return;let r;do r=`${e}:${Math.floor(Math.random()*100001)}`;while(oe[r]);return emitNet(`_bl_cb_${e}`,W,r,...t),new Promise(o=>{oe[r]=o})}function ae(e,t){onNet(`_bl_cb_${e}`,async(r,o,...a)=>{let n;try{n=await t(...a)}catch(s){console.error(`an error occurred while handling callback event ${e}`),console.log(`^3${s.stack}^0`)}emitNet(`_bl_cb_${r}`,o,n)})}var ke=e=>new Promise(t=>{let r=()=>{if(RequestResourceFileSet(e)){let o=exports.bl_appearance.config().locale,a=LoadResourceFile(W,`locale/${o}.json`);a||(console.error(`${o}.json not found in locale, please verify!, we used english for now!`),a=LoadResourceFile(W,"locale/en.json")),t(a)}else setTimeout(r,100)};r()});var G=exports.bl_bridge,E=()=>G.core().getPlayerData(),f=()=>E().cid,ve=()=>E().gender==="male"?"mp_m_freemode_01":"mp_f_freemode_01";function Se(e){return new Promise(t=>setTimeout(t,e))}function Be(e){return e.includes("'")?e.replace(/'/g,""):e}function Ae(){let e=E().job;return e?{name:e.name,isBoss:e.isBoss}:null}var ce=2,ie=1,L=!1,g=1.8,b=null,C=0,H=0,y=null,ne=null,le=!1;var I="head",Ke={whole:0,head:31086,torso:24818,legs:[16335,46078],shoes:[14201,52301]},O=e=>Math.cos(e*Math.PI/180),se=e=>Math.sin(e*Math.PI/180),De=()=>{let e=(O(H)*O(C)+O(C)*O(H))/2*g,t=(se(H)*O(C)+O(C)*se(H))/2*g,r=se(C)*g;return[e,t,r]},pe=(e,t)=>{if(!L||!y||le)return;e=e??0,t=t??0,H-=e,C+=t;let o=I==="whole"||I==="head"?89:70;C=Math.min(Math.max(C,I==="shoes"?5:-20),o);let[s,l,p]=De();SetCamCoord(b,y.x+s,y.y+l,y.z+p),PointCamAtCoord(b,y.x,y.y,y.z)},Oe=async(e,t)=>{let r=GetEntityHeading(i)+94;t=t??1,le=!0,g=t,H=r;let[o,a,n]=De(),s=CreateCamWithParams("DEFAULT_SCRIPTED_CAMERA",e.x+o,e.y+a,e.z+n,0,0,0,70,!1,0);y=e,le=!1,ne=b,b=s,PointCamAtCoord(s,e.x,e.y,e.z),SetCamActiveWithInterp(s,ne,250,0,0),await A(250),SetCamUseShallowDofMode(s,!0),SetCamNearDof(s,.4),SetCamFarDof(s,1.2),SetCamDofStrength(s,.3),He(s),DestroyCam(ne,!0)},He=e=>{DoesCamExist(b)&&e==b&&(SetUseHiDof(),setTimeout(He,0))},Fe=()=>{if(L)return;L=!0,g=ce,b=CreateCam("DEFAULT_SCRIPTED_CAMERA",!0);let[e,t,r]=GetPedBoneCoords(i,31086,0,0,0);SetCamCoord(b,e,t,r),RenderScriptCams(!0,!0,1e3,!0,!0),D("whole",g)},Me=()=>{L&&(L=!1,RenderScriptCams(!1,!0,250,!0,!1),DestroyCam(b,!0),b=null,y=null)},D=(e,t=g)=>{let r=Ke[e],o=Array.isArray(r);if(I=e,!o&&r===0){let[l,p,c]=GetEntityCoords(i,!1);Oe({x:l,y:p,z:c+0},t);return}if(t>ie&&(t=ie),o){let[l,p,c]=GetPedBoneCoords(i,r[0],0,0,0),[d,h,te]=GetPedBoneCoords(i,r[1],0,0,0);var a=(l+d)/2,n=(p+h)/2,s=(c+te)/2}else var[a,n,s]=GetPedBoneCoords(i,r,0,0,0);Oe({x:a,y:n,z:s+0},t)};RegisterNuiCallback("appearance:camMove",(e,t)=>{pe(e.x,e.y),t(1)});RegisterNuiCallback("appearance:camSection",(e,t)=>{switch(e){case"whole":D("whole",ce);break;case"head":D("head");break;case"torso":D("torso");break;case"legs":D("legs");break;case"shoes":D("shoes"),pe();break}t(1)});RegisterNuiCallback("appearance:camZoom",(e,t)=>{if(e==="down"){let r=I==="whole"?ce:ie,o=g+.05;g=o>=r?r:o}else if(e==="up"){let r=g-.05;g=r<=.3?.3:r}g=g,pe(),t(1)});var ue=["Blemishes","FacialHair","Eyebrows","Ageing","Makeup","Blush","Complexion","SunDamage","Lipstick","MolesFreckles","ChestHair","BodyBlemishes","AddBodyBlemishes","EyeColor"];var de=["Nose_Width","Nose_Peak_Height","Nose_Peak_Lenght","Nose_Bone_Height","Nose_Peak_Lowering","Nose_Bone_Twist","EyeBrown_Height","EyeBrown_Forward","Cheeks_Bone_High","Cheeks_Bone_Width","Cheeks_Width","Eyes_Openning","Lips_Thickness","Jaw_Bone_Width","Jaw_Bone_Back_Lenght","Chin_Bone_Lowering","Chin_Bone_Length","Chin_Bone_Width","Chin_Hole","Neck_Thikness"];var me=["face","masks","hair","torsos","legs","bags","shoes","neck","shirts","vest","decals","jackets"];var fe=["hats","glasses","earrings","mouth","lhand","rhand","watches","bracelets"];function Ue(e){return exports.bl_appearance.models().findIndex(o=>GetHashKey(o)===e)}function Ne(e){return{color:GetPedHairColor(e),highlight:GetPedHairHighlightColor(e)}}function U(e){let t=new ArrayBuffer(80);global.Citizen.invokeNative("0x2746bd9d88c5c5d0",e,new Uint32Array(t));let{0:r,2:o,4:a,6:n,8:s,18:l,10:p}=new Uint32Array(t),{0:c,2:d,4:h}=new Float32Array(t,48);return{shapeFirst:r,shapeSecond:o,shapeThird:a,skinFirst:n,skinSecond:s,skinThird:p,shapeMix:c,thirdMix:h,skinMix:d,hasParent:!!l}}function Z(e){let t={},r={};for(let o=0;o<ue.length;o++){let a=ue[o];if(t[a]=GetNumHeadOverlayValues(o),a==="EyeColor")r[a]={id:a,index:o,overlayValue:GetPedEyeColor(e)};else{let[n,s,l,p,c,d]=GetPedHeadOverlayData(e,o);r[a]={id:a,index:o,overlayValue:s===255?-1:s,colourType:l,firstColor:p,secondColor:c,overlayOpacity:d}}}return[r,t]}function q(e){let t=GetEntityModel(e);if(t!==GetHashKey("mp_m_freemode_01")&&t!==GetHashKey("mp_f_freemode_01"))return;let r={};for(let o=0;o<de.length;o++){let a=de[o];r[a]={id:a,index:o,value:GetPedFaceFeature(e,o)}}return r}function $(e){let t={},r={};for(let o=0;o<me.length;o++){let a=me[o],n=GetPedDrawableVariation(e,o);r[a]={id:a,index:o,total:GetNumberOfPedDrawableVariations(e,o),textures:GetNumberOfPedTextureVariations(e,o,n)},t[a]={id:a,index:o,value:GetPedDrawableVariation(e,o),texture:GetPedTextureVariation(e,o)}}return[t,r]}function J(e){let t={},r={};for(let o=0;o<fe.length;o++){let a=fe[o],n=GetPedPropIndex(e,o);r[a]={id:a,index:o,total:GetNumberOfPedPropDrawableVariations(e,o),textures:GetNumberOfPedPropTextureVariations(e,o,n)},t[a]={id:a,index:o,value:GetPedPropIndex(e,o),texture:GetPedPropTextureIndex(e,o)}}return[t,r]}async function x(e){let[t,r]=Z(e),[o,a]=$(e),[n,s]=J(e),l=GetEntityModel(e);return{modelIndex:Ue(l),model:l,hairColor:Ne(e),headBlend:U(e),headOverlay:t,headOverlayTotal:r,headStructure:q(e),drawables:o,props:n,drawTotal:a,propTotal:s,tattoos:[]}}exports("GetAppearance",x);ae("bl_appearance:client:getAppearance",()=>x(i||PlayerPedId()));function Ze(e){let[t]=$(e),[r]=J(e),[o]=Z(e);return{headOverlay:o,drawables:t,props:r}}exports("GetPedClothes",Ze);function qe(e){return{headBlend:U(e),headStructure:q(e),hairColor:Ne(e),model:GetEntityModel(e)}}exports("GetPedSkin",qe);function X(){let e=[],[t,r]=exports.bl_appearance.tattoos();for(let a=0;a<r.length;a++){let n=r[a],s=n.zone,l=n.label,p=n.index;e[p]={zone:s,label:l,zoneIndex:p,dlcs:[]};for(let c=0;c<t.length;c++){let d=t[c];e[p].dlcs.push({label:d.dlc,dlcIndex:c,tattoos:[]})}}let o=GetEntityModel(i)===GetHashKey("mp_f_freemode_01");for(let a=0;a<t.length;a++){let n=t[a],{dlc:s,tattoos:l}=n,p=GetHashKey(s);for(let c=0;c<l.length;c++){let d=l[c],h=null,z=d.toLowerCase().includes("_f");(z&&o||!z&&!o)&&(h=d);let k=null,B=-1;h&&(k=GetHashKey(h),B=GetPedDecorationZoneFromHashes(p,k)),B!==-1&&k&&e[B].dlcs[a].tattoos.push({label:h,hash:k,zone:B,dlc:s})}}return e}ae("bl_appearance:client:migration:setAppearance",e=>{e.type==="fivem"&&exports["fivem-appearance"].setPlayerAppearance(e.data),e.type==="illenium"&&exports["illenium-appearance"].setPlayerAppearance(e.data)});var Q={hats:{type:"prop",index:0},glasses:{type:"prop",index:1},masks:{type:"drawable",index:1,off:0},shirts:{type:"drawable",index:8,off:15,hook:{drawables:[{component:3,variant:15,texture:0,id:"torsos"},{component:8,variant:15,texture:0,id:"shirts"}]}},jackets:{type:"drawable",index:11,off:15,hook:{drawables:[{component:3,variant:15,texture:0,id:"torsos"},{component:11,variant:15,texture:0,id:"jackets"}]}},vest:{type:"drawable",index:9,off:0},legs:{type:"drawable",index:4,off:18},shoes:{type:"drawable",index:6,off:34}};function T(e,t){return SetPedComponentVariation(e,t.index,t.value,t.texture,0),GetNumberOfPedTextureVariations(e,t.index,t.value)}function v(e,t){if(t.value===-1){ClearPedProp(e,t.index);return}return SetPedPropIndex(e,t.index,t.value,t.texture,!1),GetNumberOfPedPropTextureVariations(e,t.index,t.value)}var S=async e=>{let t=await _e(e);SetPlayerModel(PlayerId(),t),SetModelAsNoLongerNeeded(t);let r=PlayerPedId();j(r),SetPedDefaultComponentVariation(r),t===GetHashKey("mp_m_freemode_01")?SetPedHeadBlendData(i,0,0,0,0,0,0,0,0,0,!1):t===GetHashKey("mp_f_freemode_01")&&SetPedHeadBlendData(i,45,21,0,20,15,0,.3,.1,0,!1)};function he(e,t){SetPedFaceFeature(e,t.index,t.value+0)}var F=e=>e>=0?e:0;function V(e,t){let r=F(t.shapeFirst),o=F(t.shapeSecond),a=F(t.shapeThird),n=F(t.skinFirst),s=F(t.skinSecond),l=F(t.skinThird),p=t.shapeMix+0,c=t.skinMix+0,d=t.thirdMix+0,h=t.hasParent;SetPedHeadBlendData(e,r,o,a,n,s,l,p,c,d,h)}function R(e,t){let r=t.index;if(r===13){SetPedEyeColor(e,t.value);return}let o=t.overlayValue;if(t.id==="hairColor"){SetPedHairTint(e,t.hairColor,t.hairHighlight);return}SetPedHeadOverlay(e,r,o,t.overlayOpacity+0),SetPedHeadOverlayColor(e,r,1,t.firstColor,t.secondColor)}function Ge(e){let t=e.drawables,r=e.props;for(let[o,a]of Object.entries(Q)){let n=a.type,s=a.index;n==="drawable"&&t[o]?GetPedDrawableVariation(i,s)!==t[o].value&&SetPedComponentVariation(i,s,t[o].value,0,0):n==="prop"&&r[o]&&GetPedPropIndex(i,s)!==r[o].value&&SetPedPropIndex(i,s,r[o].value,0,!1)}}function M(e,t){let r=t.drawables,o=t.props,a=t.headOverlay;for(let n in r){let s=r[n];T(e,s)}for(let n in o){let s=o[n];v(e,s)}for(let n in a){let s=a[n];R(e,s)}}var ge=async(e,t)=>{let r=t.headStructure,o=t.headBlend;if(await S(t.model),o&&V(e,o),r)for(let a in r){let n=r[a];he(e,n)}};function w(e,t){if(t){ClearPedDecorationsLeaveScars(e);for(let r=0;r<t.length;r++){let o=t[r].tattoo;if(o){let a=GetHashKey(o.dlc),n=o.hash;AddPedDecorationFromHashes(e,a,n)}}}}function be(e,t){let r=t.color,o=t.highlight;SetPedHairColor(e,r,o)}async function _(e,t){await ge(e,t),M(e,t),be(e,t.hairColor),w(e,t.tattoos)}async function P(e){await ge(i,e),M(i,e),be(i,e.hairColor),w(i,e.tattoos)}exports("SetPedClothes",M);exports("SetPedSkin",ge);exports("SetPedTattoos",w);exports("SetPedHairColors",be);RegisterNuiCallback("appearance:cancel",async(e,t)=>{await P(e),ye(),t(1)});RegisterNuiCallback("appearance:save",async(e,t)=>{Ge(e),await A(100);let r=await x(i);r.tattoos=e.tattoos,m("bl_appearance:server:saveAppearance",f(),r),w(i,r.tattoos),ye(),t(1)});RegisterNuiCallback("appearance:setModel",async(e,t)=>{let r=GetHashKey(e);if(!IsModelInCdimage(r)||!IsModelValid(r))return t(0);await S(r);let o=await x(i);o.tattoos=[],w(i,[]),t(o)});RegisterNuiCallback("appearance:getModelTattoos",async(e,t)=>{let r=X();t(r)});RegisterNuiCallback("appearance:setHeadStructure",async(e,t)=>{he(i,e),t(1)});RegisterNuiCallback("appearance:setHeadOverlay",async(e,t)=>{R(i,e),t(1)});RegisterNuiCallback("appearance:setHeadBlend",async(e,t)=>{V(i,e),t(1)});RegisterNuiCallback("appearance:setTattoos",async(e,t)=>{w(i,e),t(1)});RegisterNuiCallback("appearance:setProp",async(e,t)=>{let r=v(i,e);t(r)});RegisterNuiCallback("appearance:setDrawable",async(e,t)=>{let r=T(i,e);t(r)});RegisterNuiCallback("appearance:toggleItem",async(e,t)=>{let r=Q[e.item];if(!r)return t(!1);let o=e.data,a=r.type,n=r.index,s=r.hook,l=e.hookData;if(!o)return t(!1);if(a==="prop")if(GetPedPropIndex(i,n)===-1){v(i,o),t(!1);return}else{ClearPedProp(i,n),t(!0);return}else if(a==="drawable"){let p=GetPedDrawableVariation(i,n);if(o.value===r.off){t(!1);return}if(o.value===p){if(SetPedComponentVariation(i,n,r.off,0,0),s)for(let c=0;c<s.drawables?.length;c++){let d=s.drawables[c];SetPedComponentVariation(i,d.component,d.variant,d.texture,0)}t(!0);return}else{T(i,o);for(let c=0;c<l?.length;c++)T(i,l[c]);t(!1);return}}});RegisterNuiCallback("appearance:saveOutfit",async(e,t)=>{let r=f(),o=await m("bl_appearance:server:saveOutfit",r,e);t(o)});RegisterNuiCallback("appearance:deleteOutfit",async({id:e},t)=>{let r=f(),o=await m("bl_appearance:server:deleteOutfit",r,e);t(o)});RegisterNuiCallback("appearance:renameOutfit",async(e,t)=>{let r=f(),o=await m("bl_appearance:server:renameOutfit",r,e);t(o)});RegisterNuiCallback("appearance:useOutfit",async(e,t)=>{M(i,e),t(1)});RegisterNuiCallback("appearance:importOutfit",async({id:e,outfitName:t},r)=>{let o=f(),a=await m("bl_appearance:server:importOutfit",o,e,t);r(a)});RegisterNuiCallback("appearance:grabOutfit",async({id:e},t)=>{let r=await m("bl_appearance:server:grabOutfit",e);t(r)});RegisterNuiCallback("appearance:itemOutfit",async(e,t)=>{let r=await m("bl_appearance:server:itemOutfit",e);t(r)});onNet("bl_appearance:server:useOutfit",e=>{M(i,e)});var xe=exports.bl_appearance,Ee=0,we=!1,ee=null,Y=null;async function N(e,t=!1){if(e===null||we)return;let r=PlayerPedId(),o=xe.menus(),a=e.type,n=o[a];if(!n)return;j(r),Fe();let s=f(),l=n.tabs,p=t?!1:n.allowExit;Ee=GetPedArmour(r);let c=[];l.includes("outfits")&&(c=await m("bl_appearance:server:getOutfits",s));let h=[];l.includes("heritage")&&(h=xe.models());let z=l.includes("tattoos"),k;z&&(k=X());let B=$e(e),re=await x(r);if(t){let Ce=GetHashKey(ve());await S(Ce),re.model=Ce,emitNet("bl_appearance:server:setroutingbucket"),Y=new Promise(ze=>{ee=ze})}return K("appearance:data",{tabs:l,appearance:re,blacklist:B,tattoos:k,outfits:c,models:h,allowExit:p,job:Ae(),locale:await ke("locale")}),SetNuiFocus(!0,!0),K("appearance:visible",!0),we=!0,exports.bl_appearance.hideHud(!0),Y&&(await Y,emitNet("bl_appearance:server:resetroutingbucket")),Y=null,ee=null,!0}exports("openMenu",N);function $e(e){if(!e)return{};let{groupTypes:t,base:r}=xe.blacklist();if(!t)return{};if(!r)return{};let o={...r},a=E();for(let n in t){let s=t[n];for(let l in s){let p=!1;if(n=="jobs"&&e.jobs&&(p=e.jobs.includes(a.job.name)),n=="gangs"&&e.gangs&&(p=e.gangs.includes(a.gang.name)),!p){let c=s[l];o=Object.assign({},o,c,{drawables:Object.assign({},o.drawables,c.drawables)})}}}return o}function ye(){SetPedArmour(i,Ee),Me(),SetNuiFocus(!1,!1),K("appearance:visible",!1),exports.bl_appearance.hideHud(!1),ee&&ee(),we=!1}function Ie(){onNet("qb-clothing:client:loadPlayerClothing",async(e,t)=>{await _(t,e)}),onNet("qb-clothes:client:CreateFirstCharacter",()=>{exports.bl_appearance.InitialCreation()}),onNet("qb-clothing:client:openOutfitMenu",()=>{N({type:"outfits",coords:[0,0,0,0]})})}function Le(){let e=!1;on("esx_skin:resetFirstSpawn",()=>{e=!0}),on("esx_skin:playerRegistered",()=>{e&&exports.bl_appearance.InitialCreation()}),onNet("skinchanger:loadSkin2",async(t,r)=>{t.model||(t.model=GetHashKey("mp_m_freemode_01")),await _(r,t)}),onNet("skinchanger:getSkin",async t=>{let r=await f(),o=await m("bl_appearance:server:getAppearance",r);t(o)}),onNet("skinchanger:loadSkin",async(t,r)=>{await P(t),r&&r()}),onNet("esx_skin:openSaveableMenu",async t=>{exports.bl_appearance.InitialCreation(t)})}function u(e,t){on("__cfx_export_illenium-appearance_"+e,r=>{r(t)})}function Ve(){u("startPlayerCustomization",()=>{exports.bl_appearance.InitialCreation()}),u("getPedModel",e=>GetEntityModel(e)),u("getPedComponents",e=>{let t=$(e)[0],r=[];for(let o of t){let a=t[o];r.push({component_id:a.index,drawable:a.value,texture:a.texture})}}),u("getPedProps",e=>{let t=J(e)[0],r=[];for(let o of t){let a=t[o];r.push({prop_id:a.index,drawable:a.value,texture:a.texture})}}),u("getPedHeadBlend",e=>U(e)),u("getPedFaceFeatures",e=>{let t={Nose_Width:"noseWidth",Nose_Peak_Height:"nosePeakHigh",Nose_Peak_Lenght:"nosePeakSize",Nose_Bone_Height:"noseBoneHigh",Nose_Peak_Lowering:"nosePeakLowering",Nose_Bone_Twist:"noseBoneTwist",EyeBrown_Height:"eyeBrownHigh",EyeBrown_Forward:"eyeBrownForward",Cheeks_Bone_High:"cheeksBoneHigh",Cheeks_Bone_Width:"cheeksBoneWidth",Cheeks_Width:"cheeksWidth",Eyes_Openning:"eyesOpening",Lips_Thickness:"lipsThickness",Jaw_Bone_Width:"jawBoneWidth",Jaw_Bone_Back_Lenght:"jawBoneBackSize",Chin_Bone_Lowering:"chinBoneLowering",Chin_Bone_Length:"chinBoneLenght",Chin_Bone_Width:"chinBoneSize",Chin_Hole:"chinHole",Neck_Thikness:"neckThickness"},r=q(e),o={};for(let a in t){let n=r[a];o[t[a]]=n.value}return o}),u("getPedHeadOverlays",e=>{let t={sunDamage:"SunDamage",bodyBlemishes:"BodyBlemishes",chestHair:"ChestHair",complexion:"Complexion",blemishes:"Blemishes",ageing:"Ageing",lipstick:"Lipstick",eyebrows:"Eyebrows",beard:"Beard",makeUp:"Makeup",blush:"Blush",moleAndFreckles:"MolesFreckles",eyeColor:"EyeColor"},r=Z(e),o={};for(let a in t){let n=r[t[a]];o[a]={secondColor:n.secondColor,style:n.overlayValue,opacity:n.overlayOpacity,color:n.firstColor}}return o}),u("getPedHair",e=>({style:GetPedDrawableVariation(e,2),color:GetPedHairColor(e),highlight:GetPedHairHighlightColor(e),texture:GetPedTextureVariation(e,2)})),u("getPedAppearance",e=>x(e)),u("setPlayerModel",e=>{S(e)}),u("setPedHeadBlend",(e,t)=>{V(e,t)}),u("setPedFaceFeatures",(e,t)=>{let r={noseWidth:0,nosePeakHigh:1,nosePeakSize:2,noseBoneHigh:3,nosePeakLowering:4,noseBoneTwist:5,eyeBrownHigh:6,eyeBrownForward:7,cheeksBoneHigh:8,cheeksBoneWidth:9,cheeksWidth:10,eyesOpening:11,lipsThickness:12,jawBoneWidth:13,jawBoneBackSize:14,chinBoneLowering:15,chinBoneLenght:16,chinBoneSize:17,chinHole:18,neckThickness:19};for(let o in t){let a=t[o]+0;SetPedFaceFeature(e,r[o],a)}}),u("setPedHeadOverlays",(e,t)=>{let r={sunDamage:"SunDamage",bodyBlemishes:"BodyBlemishes",chestHair:"ChestHair",complexion:"Complexion",blemishes:"Blemishes",ageing:"Ageing",lipstick:"Lipstick",eyebrows:"Eyebrows",beard:"Beard",makeUp:"Makeup",blush:"Blush",moleAndFreckles:"MolesFreckles",eyeColor:"EyeColor"},o={Blemishes:0,FacialHair:1,Eyebrows:2,Ageing:3,Makeup:4,Blush:5,Complexion:6,SunDamage:7,Lipstick:8,MolesFreckles:9,ChestHair:10,BodyBlemishes:11,AddBodyBlemishes:12,EyeColor:13},a={};for(let n in t){let s=t[n],l=r[n];a[l]={id:l,index:o[l],overlayValue:s.opacity,colourType:1,firstColor:s.color,secondColor:s.secondColor,overlayOpacity:s.opacity}}R(e,a)}),u("setPedHair",async(e,t,r)=>{SetPedComponentVariation(e,2,t.style,t.texture,0),SetPedHairColor(e,t.color,t.highlight)}),u("setPedEyeColor",(e,t)=>{SetPedEyeColor(e,t)}),u("setPedComponent",(e,t)=>{let r={index:t.component_id,value:t.drawable,texture:t.texture};T(e,r)}),u("setPedComponents",(e,t)=>{for(let r of t){let o={index:r.component_id,value:r.drawable,texture:r.texture};T(e,o)}}),u("setPedProp",(e,t)=>{let r={index:t.prop_id,value:t.drawable,texture:t.texture};v(e,r)}),u("setPedProps",(e,t)=>{for(let r of t){let o={index:r.prop_id,value:r.drawable,texture:r.texture};v(e,o)}}),u("setPedAppearance",(e,t)=>{_(e,t)}),u("setPedTattoos",(e,t)=>{w(e,t)})}RegisterCommand("openMenu",async()=>{exports.bl_appearance.InitialCreation()},!1);exports("SetPedAppearance",async(e,t)=>{await _(e,t)});exports("SetPlayerPedAppearance",async e=>{let t;if(!e||typeof e=="string"){let r=e||await f();t=await m("bl_appearance:server:getAppearance",r)}else typeof e=="object"&&(t=e);if(!t)throw new Error("No valid appearance found");await P(t)});exports("GetPlayerPedAppearance",async e=>(e=e||await f(),await m("bl_appearance:server:getAppearance",e)));exports("InitialCreation",async e=>{await N({type:"appearance",coords:[0,0,0,0]},!0),e&&e()});on("bl_sprites:client:useZone",e=>{N(e)});onNet("bl_bridge:client:playerLoaded",async()=>{for(;!G.core().playerLoaded();)await Se(100);let e=await f(),t=await m("bl_appearance:server:getAppearance",e);t&&await P(t)});onNet("onResourceStart",async e=>{if(e===GetCurrentResourceName()&&G.core().playerLoaded()){let t=await f(),r=await m("bl_appearance:server:getAppearance",t);if(!r)return;await P(r)}});var Re=G.getFramework("core"),Pe=Be(GetConvar("bl:framework","qb"));Pe=="qb"||Pe=="qbx"&&GetResourceState(Re)=="started"?Ie():Pe=="esx"&&GetResourceState(Re)=="started"&&Le();Ve();RegisterCommand("reloadskin",async()=>{let e=await f(),t=GetEntityHealth(i),r=GetEntityMaxHealth(i),o=GetPedArmour(i),a=await m("bl_appearance:server:getAppearance",e);a&&(await P(a),SetPedMaxHealth(i,r),A(1e3),SetEntityHealth(i,t),SetPedArmour(i,o))},!1);
